pipeline {
    agent any
    environment {
        EMAIL_RECIPIENT = "dzassadcass@gmail.com"
    }
    stages {
        stage('Create Log') {
            steps {
                script {
                    sh 'echo "Test log content" > test-log.log'
                }
            }
            post {
                always {
                    archiveArtifacts artifacts: 'test-log.log'
                    // Use shell command to send email with attachment
                    sh '''
                    echo "This is a test email with an attachment." | mutt -s "Test Email with Attachment" -a test-log.log -- ${EMAIL_RECIPIENT}
                    '''
                }
            }
        }
    }
}
